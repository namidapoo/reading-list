# Reading List Chrome 拡張機能 要件書

## 概要

後で読みたい Web ページを簡単に保存・管理できる Chrome 拡張機能

## 主要機能要件

### 1. ページ保存機能

- **R1.1** ポップアップの「+」ボタンから現在のタブを保存できる
- **R1.2** ページ右クリックメニューから現在のページを保存できる
- **R1.3** リンク右クリックメニューからリンク先を保存できる
- **R1.4** 同じ URL の重複保存時は既存アイテムを更新し最上部に移動する

### 2. リスト表示機能

- **R2.1** 保存したページを追加日時の降順で一覧表示する
- **R2.2** 各アイテムにはタイトル、URL、追加日時を表示する
- **R2.3** 保存済みアイテムの総数を表示する
- **R2.4** favicon アイコンを表示する（DuckDuckGo Icons API 使用）

### 3. 検索機能

- **R3.1** URL またはタイトルの部分一致で検索できる
- **R3.2** 大文字小文字を区別しない検索を提供する
- **R3.3** リアルタイムで検索結果をフィルタリング表示する

### 4. アイテム操作機能

- **R4.1** クリックで現在のタブでページを開く
- **R4.2** Ctrl/Cmd+クリックで新しいバックグラウンドタブで開く
- **R4.3** 「×」ボタンでアイテムを削除できる

### 5. データ同期機能

- **R5.1** chrome.storage.sync を使用してデバイス間でデータを同期する
- **R5.2** 同期は自動的に行われる

## 非機能要件

### パフォーマンス

- **NF1.1** ポップアップ表示は 200ms 以内
- **NF1.2** 検索フィルタリングは 100ms 以内で反映
- **NF1.3** 最大保存可能数（512 件）のアイテムでも遅延なく動作

### 互換性

- **NF2.1** Chrome 88 以降で動作
- **NF2.2** Manifest V3 準拠

### セキュリティ

- **NF3.1** 最小限の権限（tabs, storage, contextMenus）のみ要求
- **NF3.2** 外部通信は favicon 取得のみ

### ユーザビリティ

- **NF4.1** 直感的で学習不要な UI
- **NF4.2** エラーメッセージは具体的で対処法を含む
- **NF4.3** prefers-color-scheme に応じてライト/ダークモードを自動切り替え

## 技術制約

### ストレージ制限

- chrome.storage.sync 最大容量: 102,400 bytes
- 1 アイテム最大サイズ: 8,192 bytes
- 最大アイテム数: 512

### UI 制約

- ポップアップ最大幅: 800px
- ポップアップ最大高: 600px

### データ構造

```typescript
interface ReadingItem {
  url: string; // 一意識別子
  title: string; // ページタイトル
  addedAt: number; // Unix timestamp (ミリ秒)
  favicon?: string; // Favicon URL (オプション)
}
```

## MVP 範囲

以下の機能を初期リリースに含める：

- [x] ポップアップからのページ保存
- [x] 保存済みアイテムの一覧表示
- [x] アイテムクリックでページを開く
- [x] アイテムの削除
- [x] 基本的な検索機能
- [x] Chrome Sync による同期
- [x] コンテキストメニューからの保存
- [x] ダークモード対応（prefers-color-scheme に応じて自動切り替え）

## 将来の拡張（スコープ外）

- 多言語対応（i18n）
- インポート/エクスポート
- タグ付け機能
- 既読/未読の管理
- ソート方法の選択
- キーボードショートカット
